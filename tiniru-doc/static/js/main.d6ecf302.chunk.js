(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(46)},32:function(e,t,a){},34:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),l=a.n(r),s=a(50),c=(a(30),a(32),a(3)),i=a(4),d=a(6),m=a(5),u=a(7),g=a(1),p=(a(34),a(48)),h=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("nav",{id:"topnav",className:"navbar navbar-expand-lg navbar-light bg-light fixed-top border-bottom"},o.a.createElement(p.a,{className:"navbar-brand tiniru ",to:"/"},"Tini",o.a.createElement("span",null,"ru")),o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"btn  btn-outline-dark",rel:"noopener noreferrer",target:"_blank",href:"https://tiniru.com"},"Work Online")))))}}]),t}(n.Component),b=a(54),v=a(49),f=a(51),E=a(52),y=a(17),N=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return o.a.createElement("main",{className:"container  mt-5 pt-5 mb-5"},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"col-md-8"},o.a.createElement("div",{className:"jumbotron text-center"},o.a.createElement("h1",{className:"display-4"},"Tiniru Doc"),o.a.createElement("p",{className:"lead"},"An easy way to make documentation of App"),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("p",null,"Tiniru Doc is a Documentation Generator of App. Aims to make easier the developers in making documentation of App."),o.a.createElement(p.a,{to:"/project",className:"btn btn-primary btn-lg"},"Get Started!")))))}}]),t}(n.Component),w=a(10),j="TINIRU_DB",S=1,O="project",k="topics",_="pages",D="changelog",I="navigation",C=j,T=S,x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={type:"website",name:"",logo:"",description:"",siteUrl:""},a.db=null,a.handleLoad=a.handleLoad.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(g.a)(Object(g.a)(a))),a.handleUploadLogo=a.handleUploadLogo.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.handleLoad()}},{key:"handleLoad",value:function(){this.readProject()}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(w.a)({},n,a))}},{key:"readProject",value:function(){var e=window.indexedDB.open(C,T),t=this;e.onsuccess=function(a){a.target.result.transaction(["project"]).objectStore("project").index("slug").openCursor(null,"prev").onsuccess=function(e){if(e.target.result){var a=e.target.result.value;"undefined"!==typeof a&&(t.setState({type:a.type,name:a.name,logo:a.logo,description:a.description,siteUrl:a.siteUrl}),t.showLogo(),localStorage.setItem("myProject",a.slug),localStorage.setItem("myProjectName",a.name))}},e.onerror=function(e){console.log("The fetch data failed")}},e.onerror=function(t){console.log("[onerror]",e.error)}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t,a={slug:(t=this.state.name,encodeURI(t.replace(" ","").toLowerCase())),name:this.state.name,type:this.state.type,logo:this.state.logo,description:this.state.description,siteUrl:this.state.siteUrl};localStorage.setItem("myProject",a.slug);var n=window.indexedDB.open(C,T),o=this.props;n.onsuccess=function(e){var t=e.target.result.transaction(["project"],"readwrite").objectStore("project").put(a);t.onsuccess=function(e){console.log("The data has been written successfully"),o.history.push("/manage")},t.onerror=function(e){console.log("The data has been written failed")}},n.onerror=function(e){console.log("[onerror]",n.error)}}},{key:"showLogo",value:function(){var e='<img src="'+this.state.logo+'" style="max-width:124px;" class="img-fluid">';this.state.logo.length>0&&(this.refs.imagepreview.innerHTML=e)}},{key:"handleUploadLogo",value:function(e){var t=e.target.files[0],a=new FileReader,n=this;a.readAsBinaryString(t),a.onload=function(){var e="data:image/jpeg;base64,"+btoa(a.result);n.setState({logo:e}),n.showLogo()},a.onerror=function(){console.log("there are some problems")}}},{key:"render",value:function(){return o.a.createElement("main",{className:"container  mt-5 pt-5 mb-5"},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"col-md-8"},o.a.createElement("h1",{className:"mb-4"},"Create Doc."),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-3 col-form-label"},"Type of App"),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("select",{name:"type",ref:"type",onChange:this.handleInputChange,value:this.state.type,className:"form-control"},o.a.createElement("option",{value:"website"},"Website App"),o.a.createElement("option",{value:"mobile"},"Mobile App"),o.a.createElement("option",{value:"dekstop"},"Dekstop App"),o.a.createElement("option",{value:"programming"},"Programming"),o.a.createElement("option",{value:"other"},"Other")))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-3 col-form-label"},"Name of App"),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("input",{type:"text",name:"name",ref:"name",onChange:this.handleInputChange,value:this.state.name,className:"form-control",id:"",placeholder:"Title for Documentation"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-3 col-form-label"},"Logo"),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text"},"Upload")),o.a.createElement("div",{className:"custom-file"},o.a.createElement("input",{type:"file",name:"logo",onChange:this.handleUploadLogo,className:"custom-file-input"}),o.a.createElement("label",{className:"custom-file-label"},"Choose file"))),o.a.createElement("div",{id:"imagepreview",ref:"imagepreview"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-3 col-form-label"},"Description"),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("textarea",{name:"description",ref:"description",onChange:this.handleInputChange,value:this.state.description,className:"form-control",id:"",placeholder:"Descritption of application ..."}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-3 col-form-label"},"Site Url"),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("input",{type:"text",name:"siteUrl",ref:"siteUrl",onChange:this.handleInputChange,value:this.state.siteUrl,className:"form-control",id:"",placeholder:"Http:// ....."}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"col-sm-3"}),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg btn-block"},"Save")))))))}}]),t}(n.Component),L=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:(this.props.visible?"show":"false")+" modal in",id:"confirmModal",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true",style:this.props.visible?{display:"block"}:{display:"none"}},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",id:"confirmModalLabel"},"Confirmation!"),o.a.createElement("button",{type:"button",onClick:this.props.modal,className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,this.props.message)),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",onClick:this.props.modal,className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),o.a.createElement("button",{type:"button",onClick:this.props.remove,className:"btn btn-primary"},"Continue")))))}}]),t}(n.Component),B=j,M=S,P=k,R=_,U=D,q=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="__changelog__"===this.props.topic?"changelog":"edit";return o.a.createElement("div",{key:this.props.slug,onDragOver:this.props.dragover,className:"card rounded-0 mb-2 "},o.a.createElement("div",{draggable:"true",onDragStart:this.props.dragstart,onDragEnd:this.props.dragend,className:"card-header py-1 px-3 cpointer"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-9"},o.a.createElement("div",{className:""},this.props.title)),o.a.createElement("div",{className:"col-md-3 text-right "},o.a.createElement(p.a,{to:t+"/"+this.props.slug,className:"bbtn btn-sm btn-link py-0 px-1 "},"Edit"),o.a.createElement("button",{onClick:function(){return e.props.remove(e.props.slug,e.props.topic)},className:"btn btn-sm btn-link py-0 px-1  text-danger"},"Del.")))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onDragStart=function(e,t){a.draggedItem=a.state.items[t],e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),e.target.parentNode.className+=" border-dark text-white bg-secondary"},a.onDragOver=function(e){var t=a.state.items[e];if(a.draggedItem!==t){var n=a.state.items.filter(function(e){return e!==a.draggedItem});n.splice(e,0,a.draggedItem),a.setState({items:n})}},a.onDragEnd=function(e){a.draggedItem=null,e.target.parentNode.classList.remove("border-dark"),e.target.parentNode.classList.remove("text-white"),e.target.parentNode.classList.remove("bg-secondary");var t,n=window.indexedDB.open(B,M),o=Object(g.a)(Object(g.a)(a));n.onsuccess=function(e){t=e.target.result,o.state.items.map(function(e,a){var n={topic:e.topic,slug:e.slug,title:e.title,content:e.content,meta_keywords:e.meta_keywords,meta_description:e.meta_description,publish:e.publish,order:a,project:e.project},o=t.transaction([R],"readwrite").objectStore(R);return console.log(n),o.put(n).onsuccess=function(e){},!0})}},a.state={isToggleOn:!1,items:a.props.items,showChild:!1},a.handleToggle=a.handleToggle.bind(Object(g.a)(Object(g.a)(a))),a.onDragOver=a.onDragOver.bind(Object(g.a)(Object(g.a)(a))),a.onDragStart=a.onDragStart.bind(Object(g.a)(Object(g.a)(a))),a.onDragEnd=a.onDragEnd.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.items.sort(function(e,t){return parseFloat(e.order)-parseFloat(t.order)});this.setState({items:t})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){var t=e.state.items.sort(function(e,t){return parseFloat(e.order)-parseFloat(t.order)});e.setState({showChild:!0,isToggleOn:e.state.items.length>0&&e.props.open,items:t})},1e3)}},{key:"componentDidUpdate",value:function(){}},{key:"handleToggle",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"render",value:function(){var e=this,t=this.state.items.map(function(t,a){return o.a.createElement(q,{key:t.slug,title:t.title,idx:a,topic:t.topic,slug:t.slug,dragstart:function(t){return e.onDragStart(t,a)},dragover:function(t){return e.onDragOver(a)},dragend:function(t){return e.onDragEnd(t)},remove:e.props.remove})});return o.a.createElement("div",{className:"card rounded-0 mb-2"},o.a.createElement("div",{className:"card-header py-2"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{onClick:this.handleToggle,className:"col-md-9 cpointer"},o.a.createElement("div",{className:"font-weight-bold"},this.props.title)),o.a.createElement("div",{className:"col-md-3 text-right"},o.a.createElement(p.a,{to:"write/"+this.props.slug,className:"btn btn-sm btn-success py-0  "},"+ Page")))),o.a.createElement("div",{className:this.state.isToggleOn?"card-body d-block":"card-body d-none"},o.a.createElement("div",null,t),o.a.createElement("div",null,o.a.createElement(p.a,{to:"write/"+this.props.slug,className:"btn btn-success btn-sm "},"+ Add Page"))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onDragStartLog=function(e,t){a.draggedItem=a.state.changelogList[t],e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),e.target.parentNode.className+=" border-dark text-white bg-secondary"},a.onDragOverLog=function(e){var t=a.state.changelogList[e];if(a.draggedItem!==t){var n=a.state.changelogList.filter(function(e){return e!==a.draggedItem});n.splice(e,0,a.draggedItem),a.setState({changelogList:n})}},a.onDragEndLog=function(e){a.draggedItem=null,e.target.parentNode.classList.remove("border-dark"),e.target.parentNode.classList.remove("text-white"),e.target.parentNode.classList.remove("bg-secondary");var t,n=window.indexedDB.open(B,M),o=Object(g.a)(Object(g.a)(a));n.onsuccess=function(e){t=e.target.result,o.state.changelogList.map(function(e,a){var n={slug:e.slug,title:e.title,content:e.content,datelog:e.datelog,publish:e.publish,order:a,project:e.project};return t.transaction([U],"readwrite").objectStore(U).put(n).onsuccess=function(e){},!0})}},a.state={type:"website",name:"",logo:"",description:"",siteUrl:"",topicFormShow:!1,topicList:[],changelogList:[],modalVisible:!1,slugDeletePage:"",slugDeleteTopic:"",slugDeleteLog:"",showChild:!1},a.toggleFormTopic=a.toggleFormTopic.bind(Object(g.a)(Object(g.a)(a))),a.handleLoad=a.handleLoad.bind(Object(g.a)(Object(g.a)(a))),a.removePage=a.removePage.bind(Object(g.a)(Object(g.a)(a))),a.openModal=a.openModal.bind(Object(g.a)(Object(g.a)(a))),a.handleRemovePage=a.handleRemovePage.bind(Object(g.a)(Object(g.a)(a))),a.handleLoad(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("topnav").style.display="flex",window.scrollTo(0,0)}},{key:"handleLoad",value:function(){var e,t=window.indexedDB.open(B,M),a=this;t.onsuccess=function(t){var n=(e=t.target.result).transaction(["project"]).objectStore("project").get(localStorage.getItem("myProject"));n.onsuccess=function(e){var t=n.result;if(a.setState({type:t.type,name:t.name,logo:t.logo,description:t.description,siteUrl:t.siteUrl}),t.logo.length>0){var o='<img src="'+t.logo+'" style="max-width:54px;" class="img-fluid rounded-circle">';a.refs.imagepreview.innerHTML=o}};var o=e.transaction([P],"readonly").objectStore(P).getAll();o.onsuccess=function(t){var n=o.result,r=[];n.map(function(t){var a=e.transaction([R],"readonly").objectStore(R).index("topic"),n=IDBKeyRange.only(t.slug),o=a.openCursor(n),l=[];return o.onsuccess=function(e){var t=e.target.result;t&&(l.push({slug:t.value.slug,title:t.value.title,topic:t.value.topic,order:t.value.order}),t.continue())},r.push({slug:t.slug,name:t.name,order:t.order,pages:l}),!0});var l=r.sort(function(e,t){return parseFloat(e.order)-parseFloat(t.order)});a.setState({topicList:l}),a.forceUpdate()},o.onerror=function(e){console.log("[onerror]",o.error)};var r=e.transaction([U],"readonly").objectStore(U).getAll();r.onsuccess=function(e){var t=r.result,n=[];t.map(function(e){return n.push({slug:e.slug,title:e.title,order:e.order}),!0}),a.setState({changelogList:n})}},t.onerror=function(e){console.log("[onerror]",t.error)}}},{key:"toggleFormTopic",value:function(){this.setState(function(e){return{topicFormShow:!e.topicFormShow}})}},{key:"openModal",value:function(){var e=!this.state.modalVisible;this.setState({modalVisible:e})}},{key:"removePage",value:function(e,t){this.setState({slugDeletePage:e,slugDeleteTopic:t}),this.openModal()}},{key:"handleRemovePage",value:function(){var e,t=window.indexedDB.open(B,M),a=this;t.onsuccess=function(t){(e=t.target.result,"__changelog__"===a.state.slugDeleteTopic)?e.transaction([U],"readwrite").objectStore(U).delete(a.state.slugDeletePage).onsuccess=function(e){a.openModal(),a.handleLoad(),setTimeout(function(){a.setState(function(e){return{showChild:!e.showChild}})},1e3)}:e.transaction([R],"readwrite").objectStore(R).delete(a.state.slugDeletePage).onsuccess=function(t){a.openModal(),a.handleLoad();var n=e.transaction([R],"readonly").objectStore(R).index("topic"),o=IDBKeyRange.only(a.state.slugDeleteTopic),r=n.openCursor(o),l=[];r.onsuccess=function(e){var t=e.target.result;t&&(l.push({slug:t.value.slug,title:t.value.title}),t.continue())},a.setState(function(e){return{topicList:e.topicList.map(function(e){return e.slug===a.state.slugDeleteTopic?{slug:e.slug,name:e.name,order:e.order,pages:l}:e})}}),setTimeout(function(){a.setState(function(e){return{showChild:!e.showChild}})},1e3)}}}},{key:"render",value:function(){var e=this,t=this.props.location.hash,a=this.state.topicList.map(function(a){return o.a.createElement(A,{key:a.slug,title:a.name,open:t==="#"+a.slug,slug:a.slug,items:a.pages,remove:e.removePage.bind(e)})}),n=this.state.changelogList.map(function(t,a){return o.a.createElement(q,{key:t.slug,title:t.title,idx:a,topic:"__changelog__",slug:t.slug,dragstart:function(t){return e.onDragStartLog(t,a)},dragover:function(t){return e.onDragOverLog(a)},dragend:function(t){return e.onDragEndLog(t)},remove:e.removePage.bind(e)})});return o.a.createElement("main",{className:"container  mt-5 pt-5 mb-5"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row mb-3"},o.a.createElement("div",{className:"col-md-3 "},o.a.createElement("div",{id:"imagepreview",ref:"imagepreview"})),o.a.createElement("div",{className:"col-md-9"},o.a.createElement("div",{className:"card-title h4"},this.state.name),o.a.createElement("div",{className:"card-subtitle mb-2"},o.a.createElement("a",{href:this.state.siteUrl,className:"link  text-muted"},this.state.siteUrl)))),o.a.createElement("p",{className:"card-text"},this.state.description),o.a.createElement("footer",{className:"blockquote-footer"},this.state.type,o.a.createElement(p.a,{to:"/project?_edit=true",className:"btn btn-sm btn-link"},"Edit")))),o.a.createElement("div",{className:"mt-5"},o.a.createElement("div",{className:"m-3"},o.a.createElement(p.a,{to:"/generate/html",className:"btn btn-primary btn-block"},"Generate as HTML")),o.a.createElement("div",{className:"m-3"},o.a.createElement(p.a,{to:"/generate/html",className:"btn btn-primary btn-block"},"Generate as PDF")))),o.a.createElement("div",{className:"col-md-9"},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"pb-3"},o.a.createElement("div",{className:"row mb-3"},o.a.createElement("div",{className:"col-md-8"},o.a.createElement("h1",{className:""},"Topics")),o.a.createElement("div",{className:"col-md-4 text-right position-relative "},o.a.createElement(p.a,{to:"/topic",style:{bottom:"5px",right:"15px"},className:"btn btn-sm radius-0 btn-dark align-baseline position-absolute"},"Set Topics"))),a),o.a.createElement("hr",{className:"my-3"}),o.a.createElement("div",{className:"mt-3"},o.a.createElement("div",{className:"row mb-3"},o.a.createElement("div",{className:"col-md-8"}," ",o.a.createElement("h4",null,"Change Log")),o.a.createElement("div",{className:"col-md-4 text-right position-relative "},o.a.createElement(p.a,{to:"/changelog",style:{bottom:"5px",right:"15px"},className:"btn btn-sm radius-0 btn-dark align-baseline position-absolute"},"Add Change Log"))),o.a.createElement("div",null,n))))),o.a.createElement(L,{visible:this.state.modalVisible,modal:function(t){return e.openModal()},remove:function(t){return e.handleRemovePage()},message:"Deleted pages cannot be restored. Are you sure to remove this page?"}))}}]),t}(n.Component),F=j,H=S;function G(e,t){var a;window.indexedDB.open(F,H).onsuccess=function(n){var o=(a=n.target.result).transaction([e],"readonly"),r=o.objectStore(e).getAll();r.onsuccess=function(e){var a=r.result;t&&t(a)},o.oncomplete=function(e){a.close()}}}function W(e,t,a){var n,o=window.indexedDB.open(F,H),r=null;o.onsuccess=function(o){var l=(n=o.target.result).transaction([e],"readonly");l.objectStore(e).index(t).openCursor(null,"prev").onsuccess=function(e){e.target.result&&(r=e.target.result.value)},l.oncomplete=function(e){n.close(),a&&a(r)}}}function K(e){return encodeURI(e.replace(/ /g,"-").replace(/[^\w.-]+/g,"").toLowerCase())}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"POST",referrer:"no-referrer",body:JSON.stringify(t)}).then(function(e){return e.json()})}var J=[{name:"Getting Started",slug:"getting-started",pages:[{slug:"gs-introduction",title:"Introduction"},{slug:"gs-installation",title:"Installation"}]},{name:"Basic",slug:"Basic",pages:[]},{name:"Reference",slug:"reference",pages:[]}],z=j,Q=S,X=k,Z=_,$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={isToggleOn:!1,isEdit:!1,name:a.props.title,slug:a.props.slug,items:a.props.items,showChild:!1},a.handleToggle=a.handleToggle.bind(Object(g.a)(Object(g.a)(a))),a.showEdit=a.showEdit.bind(Object(g.a)(Object(g.a)(a))),a.handleUpdateTopic=a.handleUpdateTopic.bind(Object(g.a)(Object(g.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.items.sort(function(e,t){return parseFloat(e.order)-parseFloat(t.order)});this.setState({items:t})}},{key:"handleToggle",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"showEdit",value:function(){this.setState(function(e){return{isEdit:!e.isEdit}})}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(w.a)({},n,a)),console.log(this.state.name)}},{key:"handleUpdateTopic",value:function(){var e,t=window.indexedDB.open(z,Q),a=this,n={name:a.state.name,project:localStorage.getItem("myProject"),slug:K(a.state.slug)};t.onsuccess=function(t){var o=(e=t.target.result).transaction([X],"readwrite"),r=o.objectStore(X).put(n);r.onsuccess=function(e){console.log("The data has been written successfully"),a.showEdit()},o.oncomplete=function(t){e.close()},r.onerror=function(e){console.log("The data has been written failed")}},t.onerror=function(e){console.log("[onerror]",t.error)}}},{key:"render",value:function(){var e=this.state.items.map(function(e){return o.a.createElement("li",{key:e.slug,className:""},e.title)});return o.a.createElement("div",{id:"tpc-"+this.props.slug,onDragOver:this.props.dragover,className:"card rounded-0 mb-2 "},o.a.createElement("div",{draggable:"true"===this.props.add?"false":"true",onDragStart:this.props.dragstart,onDragEnd:this.props.dragend,className:"card-header py-1 px-3"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{onClick:this.handleToggle,className:(this.state.isEdit?"d-none":"d-block")+" col-md-9 "},o.a.createElement("div",{className:"true"===this.props.add?"cpointer":"font-weight-bold cpointer"},o.a.createElement("span",null,this.state.name))),"false"===this.props.add?o.a.createElement("div",{className:(this.state.isEdit?"d-block":"d-none")+" col-md-9 foredit"},o.a.createElement("input",{type:"text",name:"name",onChange:this.handleInputChange,className:"form-control form-control form-control-sm",value:this.state.name})):"",o.a.createElement("div",{className:"col-md-3 text-right "},"true"===this.props.add?o.a.createElement("button",{onClick:this.props.register,className:"btn btn-sm btn-secondary py-0  "},"Tambahkan"):o.a.createElement("div",null,o.a.createElement("div",{className:this.state.isEdit?"d-none":"d-block"},o.a.createElement("button",{onClick:this.showEdit,className:"btn btn-sm btn-link py-0 px-1 "},"Edit"),o.a.createElement("button",{onClick:this.props.remove,className:"btn btn-sm btn-link py-0 px-1  text-danger"},"Del.")),"false"===this.props.add?o.a.createElement("div",{className:(this.state.isEdit?"d-block":"d-none")+" foredit"},o.a.createElement("button",{onClick:this.handleUpdateTopic,className:"btn btn-sm btn-secondary  "},"Save")):"")))),o.a.createElement("div",{className:this.state.isToggleOn?"card-body d-block":"card-body d-none"},o.a.createElement("ul",null,e)))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onDragStart=function(e,t){a.draggedItem=a.state.topicList[t],e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),e.target.parentNode.className+=" border-dark text-white bg-secondary"},a.onDragOver=function(e){var t=a.state.topicList[e];if(a.draggedItem!==t){var n=a.state.topicList.filter(function(e){return e!==a.draggedItem});n.splice(e,0,a.draggedItem),a.setState({topicList:n})}},a.onDragEnd=function(e){a.draggedItem=null,e.target.parentNode.classList.remove("border-dark"),e.target.parentNode.classList.remove("text-white"),e.target.parentNode.classList.remove("bg-secondary");var t,n=window.indexedDB.open(z,Q),o=Object(g.a)(Object(g.a)(a));n.onsuccess=function(e){t=e.target.result,o.state.topicList.map(function(e,a){var n={name:e.name,project:e.project,slug:e.slug,order:a};return t.transaction([X],"readwrite").objectStore(X).put(n).onsuccess=function(e){},n})}},a.state={name:"",topicList:[],modalVisible:!1,slugDeleteTopic:"",showChild:!1,topicTemplate:[]},a.handleLoad=a.handleLoad.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(g.a)(Object(g.a)(a))),a.removeTopic=a.removeTopic.bind(Object(g.a)(Object(g.a)(a))),a.openModal=a.openModal.bind(Object(g.a)(Object(g.a)(a))),a.handleRemoveTopic=a.handleRemoveTopic.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.setState({topicTemplate:J}),this.handleLoad()}},{key:"handleLoad",value:function(){var e,t=window.indexedDB.open(z,Q),a=this;t.onsuccess=function(t){var n=(e=t.target.result).transaction([X],"readonly").objectStore(X).getAll();n.onsuccess=function(t){var o=n.result,r=[];o.map(function(t){var a=e.transaction([Z],"readonly").objectStore(Z).index("topic"),n=IDBKeyRange.only(t.slug),o=a.openCursor(n),l=[];return o.onsuccess=function(e){var t=e.target.result;t&&(l.push({slug:t.value.slug,title:t.value.title}),t.continue())},r.push({slug:t.slug,name:t.name,order:t.order,pages:l}),!0});var l=r.sort(function(e,t){return parseFloat(e.order)-parseFloat(t.order)});a.setState({topicList:l})},n.onerror=function(e){console.log("[onerror]",n.error)}},t.onerror=function(e){console.log("[onerror]",t.error)}}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(w.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;W(X,"slug",function(e){var a={name:t.state.name,project:localStorage.getItem("myProject"),slug:K(t.state.name)};a.order=null!==e?e.order+1:0,t.addTopic(a)})}},{key:"addTopic",value:function(e,t){var a,n=window.indexedDB.open(z,Q),o=this;n.onsuccess=function(n){var r=(a=n.target.result).transaction([X],"readwrite"),l=r.objectStore(X).add(e);l.onsuccess=function(e){console.log("The data has been written successfully"),o.setState({name:""}),o.handleLoad()},r.oncomplete=function(e){a.close(),t&&t()},l.onerror=function(e){console.log("The data has been written failed")}},n.onerror=function(e){console.log("[onerror]",n.error)}}},{key:"_regiserTopic",value:function(e,t,a){W(t,"slug",function(t){var n={name:a.name,project:localStorage.getItem("myProject"),slug:a.slug};n.order=null!==t?parseInt(t.order)+1:0;var o=a.pages;return e.addTopic(n,function(){window.indexedDB.open(z,Q).onsuccess=function(t){for(var n=t.target.result.transaction([Z],"readwrite").objectStore(Z),r=0;r<o.length;r++){var l=o[r],s={topic:a.slug,slug:l.slug,title:l.title,content:"",meta_keywords:"",meta_description:"",publish:1,order:0,project:localStorage.getItem("myProject")};n.add(s)}e.handleLoad()}}),!0})}},{key:"registerTopic",value:function(e){for(var t=0;t<this.state.topicTemplate.length;t++)if(this.state.topicTemplate[t].slug===e){var a=this.state.topicTemplate[t];this._regiserTopic(this,X,a)}}},{key:"openModal",value:function(){console.log("Open modal called ",this.state.modalVisible);var e=!this.state.modalVisible;this.setState({modalVisible:e})}},{key:"removeTopic",value:function(e){this.setState({slugDeleteTopic:e}),this.openModal()}},{key:"handleRemoveTopic",value:function(){var e,t=window.indexedDB.open(z,Q),a=this;t.onsuccess=function(t){(e=t.target.result).transaction([X],"readwrite").objectStore(X).delete(a.state.slugDeleteTopic).onsuccess=function(t){var n=e.transaction([Z],"readwrite").objectStore(Z).index("topic"),o=IDBKeyRange.only(a.state.slugDeleteTopic);n.openCursor(o).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())},a.openModal(),a.handleLoad()}}}},{key:"render",value:function(){var e=this,t=this.state.topicList.map(function(t,a){return o.a.createElement($,{key:t.slug,slug:t.slug,title:t.name,add:"false",items:t.pages,remove:e.removeTopic.bind(e,t.slug),dragstart:function(t){return e.onDragStart(t,a)},dragover:function(t){return e.onDragOver(a)},dragend:function(t){return e.onDragEnd(t)}})}),a=this.state.topicTemplate.map(function(t){return o.a.createElement($,{key:t.slug,slug:t.slug,title:t.name,register:e.registerTopic.bind(e,t.slug),add:"true",items:t.pages})});return o.a.createElement("main",{className:"container mt-5 pt-5 mb-5"},o.a.createElement("h2",{className:"mb-3"},"Set Topic"),o.a.createElement(p.a,{to:"/manage",className:"btn  btn-sm radius-0 btn-light border"},"\xab Back to Manage"),o.a.createElement("div",{className:"row mt-4"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"card rounded-0 mb-2"},o.a.createElement("div",{className:"card-header"},o.a.createElement("div",{className:"font-weight-bold"},"Current Topic in Doc.")),o.a.createElement("div",{className:"card-body"},t))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"card rounded-0 mb-2 "},o.a.createElement("div",{className:"card-header "},o.a.createElement("div",{className:"font-weight-bold"},"Add Topic")),o.a.createElement("div",{className:"card-body"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group row "},o.a.createElement("div",{className:"col-sm-9"},o.a.createElement("input",{type:"text",name:"name",onChange:this.handleInputChange,value:this.state.name,className:"form-control",placeholder:"Masukan nama topic"})),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{className:"btn btn-dark "},"Simpan")))),o.a.createElement("div",{className:"clear clearfix"}),o.a.createElement("div",{className:"h5 mt-4"},"Topic Template"),o.a.createElement("div",null,a))))),o.a.createElement(L,{visible:this.state.modalVisible,modal:function(t){return e.openModal()},remove:function(t){return e.handleRemoveTopic()},message:"When deleting a topic, the pages inside will also be deleted. Are you sure to remove this topic?"}))}}]),t}(n.Component),te=a(53),ae=j,ne=S,oe=k,re=_,le=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleLoad=a.handleLoad.bind(Object(g.a)(Object(g.a)(a)));var n=a.props.match.params.slug;return a.state={topic:n,slug:"",title:null!==sessionStorage.getItem("__title")?sessionStorage.getItem("__title"):"",content:null!==sessionStorage.getItem("__content")?sessionStorage.getItem("__content"):"",meta_keywords:null!==sessionStorage.getItem("__meta_keywords")?sessionStorage.getItem("__meta_keywords"):"",meta_description:null!==sessionStorage.getItem("__meta_description")?sessionStorage.getItem("__meta_description"):"",publish:1,order:1,project:localStorage.getItem("myProject"),topic_title:"",isEdit:!0},a.handleInputChange=a.handleInputChange.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a.onUnload=a.onUnload.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.handleLoad(),document.getElementById("topnav").style.display="none",window.scrollTo(0,0),window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){sessionStorage.setItem("__title",""),sessionStorage.setItem("__content",""),sessionStorage.setItem("__meta_keywords",""),sessionStorage.setItem("__meta_description",""),sessionStorage.setItem("__slug",""),window.removeEventListener("beforeunload",this.onUnload)}},{key:"componentDidUpdate",value:function(){}},{key:"onUnload",value:function(e){return e.preventDefault(),e.returnValue="You have unsaved changes, are you sure you want to leave?"}},{key:"handleLoad",value:function(){var e={container:[["bold","italic","underline"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}],[{header:[2,3,4,!1]}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"],[{instable:["AddTable","RowAbove","RowBelow","ColLeft","ColRight","DelRow","DelCol","DelTable"]}]],handlers:{instable:function(e){e&&("AddTable"===e?a.insertTable(2,2):"RowAbove"===e?a.insertRowAbove():"RowBelow"===e?a.insertRowBelow():"ColLeft"===e?a.insertColumnLeft():"ColRight"===e?a.insertColumnRight():"DelRow"===e?a.deleteRow():"DelCol"===e?a.deleteColumn():"DelTable"===e&&a.deleteTable())},buttonlink:function(e){var a=t.getSelection();if(a){var n=prompt("Link url","");t.insertEmbed(a.index,"Button",n)}}}},t=new window.Quill("#editor",{theme:"snow",scrollingContainer:document.documentElement,modules:{table:!0,toolbar:e},placeholder:"Start writing ...",bounds:"#editor-out"}),a=t.getModule("table");Array.prototype.slice.call(document.querySelectorAll(".ql-instable .ql-picker-item")).forEach(function(e){return e.textContent=e.dataset.value}),document.querySelector(".ql-instable .ql-picker-label").innerHTML="Table"+document.querySelector(".ql-instable .ql-picker-label").innerHTML,document.querySelector(".ql-instable").classList.contains("ql-selected")&&document.querySelector(".ql-instable .ql-selected").classList.remove("ql-selected"),t.root.innerHTML=this.state.content;var n=this;t.on("editor-change",function(e){var t=document.querySelector("#editor").children[0].innerHTML;t=(t=(t=t.replace(/(<p[^>]*?>[\s|&nbsp;]*<\/p>)/g,"")).replace(/<elmblock class="elm-block" data-language="plain">/g,"")).replace(/<\/elmblock>/g,"\n"),n.setState({content:t}),sessionStorage.setItem("__content",t)});var o,r=window.indexedDB.open(ae,ne),l=this.props.match.params.slug;r.onsuccess=function(e){if(o=e.target.result,"/edit/:slug"===n.props.match.path){var a=o.transaction([re],"readonly").objectStore(re).get(l);a.onsuccess=function(e){var r=a.result,l=!1;sessionStorage.getItem("__slug")===r.slug&&(l=!0),n.setState({topic:r.topic,slug:r.slug,title:null!==sessionStorage.getItem("__title")&&l?sessionStorage.getItem("__title"):r.title,content:l?sessionStorage.getItem("__content"):r.content,meta_keywords:null!==sessionStorage.getItem("__meta_keywords")&&l?sessionStorage.getItem("__meta_keywords"):r.meta_keywords,meta_description:null!==sessionStorage.getItem("__meta_description")&&l?sessionStorage.getItem("__meta_description"):r.meta_description,publish:r.publish,order:r.order,project:r.project}),sessionStorage.setItem("__slug",r.slug),t.root.innerHTML=l?sessionStorage.getItem("__content"):r.content;var s=o.transaction([oe],"readonly").objectStore(oe).get(r.topic);s.onsuccess=function(e){var t=s.result;n.setState({topic_title:t.name})},n.forceUpdate()}}else{var r=o.transaction([oe],"readonly").objectStore(oe).get(n.state.topic);r.onsuccess=function(e){var t=r.result;n.setState({topic_title:t.name}),sessionStorage.setItem("__topic",t.slug)}}},r.onerror=function(e){console.log("[onerror]",r.error)}}},{key:"handleInputChange",value:function(e){var t,a=e.target,n=a.value,o=a.name;this.setState((t={},Object(w.a)(t,o,n),Object(w.a)(t,"isEdit",!0),t)),sessionStorage.setItem("__"+o,n)}},{key:"handleSubmit",value:function(e){this.setState({isEdit:!1}),e.preventDefault();var t,a={topic:this.state.topic,slug:(t=this.state.title,encodeURI(t.replace(" ","").toLowerCase())),title:this.state.title,content:this.state.content,meta_keywords:this.state.meta_keywords,meta_description:this.state.meta_description,publish:1,order:1,project:localStorage.getItem("myProject")};"/edit/:slug"===this.props.match.path&&(a.slug=this.state.slug);var n=this,o=window.indexedDB.open(ae,ne),r=this.props;o.onsuccess=function(e){var t=e.target.result.transaction([re],"readwrite").objectStore(re).put(a);t.onsuccess=function(e){r.history.push("/manage#"+n.state.topic)},t.onerror=function(e){console.log("The data has been written failed")}}}},{key:"render",value:function(){return o.a.createElement("main",{className:"mt-2",style:{background:"#eaeaea"}},o.a.createElement(te.a,{when:this.state.isEdit,message:"You have unsaved changes, are you sure you want to leave?"}),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"sticky-top bg-white pt-2 pb-2"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-3"},o.a.createElement("h3",null,o.a.createElement(p.a,{to:"/manage",className:"btn btn-secondary btn-sm rounded-2 mr-3"},"<"),o.a.createElement("span",{className:"font-weight-lighter"},"Create Page"))),o.a.createElement("div",{className:"col-lg-9 pr-lg-5 pl-lg-5"},o.a.createElement("div",{className:"mr-lg-5"},o.a.createElement("input",{className:"form-control rounded-0 border-top-0 border-right-0 border-left-0 border-secondary p-0",placeholder:"Title of page",name:"title",ref:"title",type:"text",value:this.state.title,onChange:this.handleInputChange})))))),o.a.createElement("div",{className:"container-fluid "},o.a.createElement("div",{className:"row "},o.a.createElement("div",{className:"col-lg-3 py-4 bg-white order-lg-0 ",id:"outleft"},o.a.createElement("div",{id:"left-inner",className:"bg-white pb-5  "},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"mb-5 text-center h5"},o.a.createElement("div",{className:" "},o.a.createElement("small",{className:"d-block font-weight-lighter mb-1"},"Topic of"),this.state.topic_title)),o.a.createElement("div",{className:"mb-4 "},o.a.createElement("label",null,"Meta Keywords"),o.a.createElement("textarea",{className:"form-control form-control-sm rounded-0",name:"meta_keywords",placeholder:"Meta Keywords ...",value:this.state.meta_keywords,ref:"meta_keywords",onChange:this.handleInputChange})),o.a.createElement("div",{className:"mb-4"},o.a.createElement("label",null,"Meta Description"),o.a.createElement("textarea",{className:"form-control form-control-sm rounded-0",name:"meta_description",value:this.state.meta_description,placeholder:"Meta Deskripsi ...",ref:"meta_description",onChange:this.handleInputChange}))))),o.a.createElement("div",{className:"col-lg-9 content pr-lg-5 pl-lg-5 order-lg-1 "},o.a.createElement("div",{id:"editor-out",className:"mr-lg-3 pb-lg-5"},o.a.createElement("div",{id:"editor",className:"bg-white border-0 mb-lg-5 mb-3"})))),o.a.createElement("button",{type:"submit",id:"btn-push",style:{position:"fixed",bottom:"0px",right:"0px"},className:"btn btn-dark rounded-1 mb-3 mx-lg-5 mx-3"},"Save Page"))))}}]),t}(n.Component),se=j,ce=S,ie=D,de="_log",me=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={title:null!==sessionStorage.getItem("__title"+de)?sessionStorage.getItem("__title"+de):"",slug:"",datelog:null!==sessionStorage.getItem("__datelog"+de)?sessionStorage.getItem("__datelog"+de):"",content:null!==sessionStorage.getItem("__content"+de)?sessionStorage.getItem("__content"+de):"",publish:1,order:1,project:localStorage.getItem("myProject"),topic_title:localStorage.getItem("myProjectName"),isEdit:!0},a.handleInputChange=a.handleInputChange.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a.onUnload=a.onUnload.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.handleLoad(),document.getElementById("topnav").style.display="none",window.scrollTo(0,0),window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){sessionStorage.setItem("__title"+de,""),sessionStorage.setItem("__content"+de,""),sessionStorage.setItem("__datelog"+de,""),sessionStorage.setItem("__slug"+de,""),window.removeEventListener("beforeunload",this.onUnload)}},{key:"componentDidUpdate",value:function(){}},{key:"onUnload",value:function(e){return e.returnValue="You have unsaved changes, are you sure you want to leave?"}},{key:"handleLoad",value:function(){var e={container:[["bold","italic","underline"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}],[{header:[2,3,4,!1]}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"],[{instable:["AddTable","RowAbove","RowBelow","ColLeft","ColRight","DelRow","DelCol","DelTable"]}]],handlers:{instable:function(e){e&&("AddTable"===e?a.insertTable(2,2):"RowAbove"===e?a.insertRowAbove():"RowBelow"===e?a.insertRowBelow():"ColLeft"===e?a.insertColumnLeft():"ColRight"===e?a.insertColumnRight():"DelRow"===e?a.deleteRow():"DelCol"===e?a.deleteColumn():"DelTable"===e&&a.deleteTable())},buttonlink:function(e){var a=t.getSelection();if(a){var n=prompt("Link url","");t.insertEmbed(a.index,"Button",n)}}}},t=new window.Quill("#editor",{theme:"snow",scrollingContainer:document.documentElement,modules:{table:!0,toolbar:e},placeholder:"Start writing ...",bounds:"#editor-out"}),a=t.getModule("table");Array.prototype.slice.call(document.querySelectorAll(".ql-instable .ql-picker-item")).forEach(function(e){return e.textContent=e.dataset.value}),document.querySelector(".ql-instable .ql-picker-label").innerHTML="Table"+document.querySelector(".ql-instable .ql-picker-label").innerHTML,document.querySelector(".ql-instable").classList.contains("ql-selected")&&document.querySelector(".ql-instable .ql-selected").classList.remove("ql-selected"),t.root.innerHTML=this.state.content;var n=this;t.on("editor-change",function(e){var t=document.querySelector("#editor").children[0].innerHTML;t=(t=(t=t.replace(/(<p[^>]*?>[\s|&nbsp;]*<\/p>)/g,"")).replace(/<elmblock class="elm-block" data-language="plain">/g,"")).replace(/<\/elmblock>/g,"\n"),n.setState({content:t}),sessionStorage.setItem("__content"+de,t)});var o=this.props.match.params.slug;"undefined"!==typeof o&&(window.indexedDB.open(se,ce).onsuccess=function(e){var a=e.target.result.transaction([ie],"readonly").objectStore(ie).get(o);a.onsuccess=function(e){var o=a.result,r=!1;sessionStorage.getItem("__slug"+de)===o.slug&&(r=!0),n.setState({slug:o.slug,title:null!==sessionStorage.getItem("__title"+de)&&r?sessionStorage.getItem("__title"+de):o.title,content:null!==sessionStorage.getItem("__content"+de)&&r?sessionStorage.getItem("__content"+de):o.content,datelog:null!==sessionStorage.getItem("__meta_keywords")&&r?sessionStorage.getItem("__datelog"+de):o.datelog,publish:o.publish,order:o.order,project:o.project}),sessionStorage.setItem("__slug"+de,o.slug),t.root.innerHTML=r?sessionStorage.getItem("__content"+de):o.content,n.forceUpdate()}})}},{key:"handleInputChange",value:function(e){var t,a=e.target,n=a.value,o=a.name;this.setState((t={},Object(w.a)(t,o,n),Object(w.a)(t,"isEdit",!0),t)),sessionStorage.setItem("__"+o+de,n)}},{key:"handleSubmit",value:function(e){this.setState({isEdit:!1}),e.preventDefault();var t,a={slug:(t=this.state.title,encodeURI(t.replace(" ","").toLowerCase())),title:this.state.title,content:this.state.content,datelog:this.state.datelog,publish:1,order:1,project:localStorage.getItem("myProject")},n=window.indexedDB.open(se,ce),o=this.props;n.onsuccess=function(e){var t=e.target.result.transaction([ie],"readwrite").objectStore(ie).put(a);t.onsuccess=function(e){o.history.push("/manage")},t.onerror=function(e){console.log("The data has been written failed")}}}},{key:"render",value:function(){return o.a.createElement("main",{className:"mt-2",style:{background:"#eaeaea"}},o.a.createElement(te.a,{when:this.state.isEdit,message:"You have unsaved changes, are you sure you want to leave?"}),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"sticky-top bg-white pt-2 pb-2"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-3"},o.a.createElement("h3",null,o.a.createElement(p.a,{to:"/manage",className:"btn btn-secondary btn-sm rounded-2 mr-3"},"<"),o.a.createElement("span",{className:"font-weight-lighter"},"Change Log"))),o.a.createElement("div",{className:"col-lg-9 pr-lg-5 pl-lg-5"},o.a.createElement("div",{className:"mr-lg-5"},o.a.createElement("input",{className:"form-control rounded-0 border-top-0 border-right-0 border-left-0 border-secondary p-0",placeholder:"Name of Change log",name:"title",ref:"title",type:"text",value:this.state.title,onChange:this.handleInputChange})))))),o.a.createElement("div",{className:"container-fluid "},o.a.createElement("div",{className:"row "},o.a.createElement("div",{className:"col-lg-3 py-4 bg-white order-lg-0 ",id:"outleft"},o.a.createElement("div",{id:"left-inner",className:"bg-white pb-5  "},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"mb-5 text-center h5"},o.a.createElement("div",{className:" "},o.a.createElement("small",{className:"d-block font-weight-lighter mb-1"},"Documentation of"),this.state.topic_title)),o.a.createElement("div",{className:"mb-4 "},o.a.createElement("label",null,"Date of Change Log"),o.a.createElement("input",{type:"date",value:this.state.datelog,onChange:this.handleInputChange,className:"form-control rounded-0",name:"datelog"}))))),o.a.createElement("div",{className:"col-lg-9 content pr-lg-5 pl-lg-5 order-lg-1 "},o.a.createElement("div",{id:"editor-out",className:"mr-lg-3 pb-lg-5"},o.a.createElement("div",{id:"editor",className:"bg-white border-0 mb-lg-5 mb-3"})))),o.a.createElement("button",{type:"submit",id:"btn-push",style:{position:"fixed",bottom:"0px",right:"0px"},className:"btn btn-dark rounded-1 mb-3 mx-lg-5 mx-3"},"Save Page"))))}}]),t}(n.Component),ue=j,ge=S,pe=O,he=I,be=k,ve=_,fe=D,Ee=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{onDragOver:this.props.dragover,className:"card rounded-0 mb-2 "},o.a.createElement("div",{draggable:"true",onDragStart:this.props.dragstart,onDragEnd:this.props.dragend,className:"card-header py-1 px-3"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3"},o.a.createElement("div",{className:"font-weight-bolder"},this.props.label)),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("span",{className:"font-weight-lighter text-muted"},this.props.url)),o.a.createElement("div",{className:"col-md-3 "},o.a.createElement("button",{onClick:this.props.remove,className:"btn btn-sm btn-link py-0 px-1  text-danger"},"Del.")))))}}]),t}(n.Component),ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onDragStart=function(e,t){a.draggedItem=a.state.navlist[t],e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target),e.target.parentNode.className+=" border-dark text-white bg-secondary"},a.onDragOver=function(e){var t=a.state.navlist[e];if(a.draggedItem!==t){var n=a.state.navlist.filter(function(e){return e!==a.draggedItem});n.splice(e,0,a.draggedItem),a.setState({navlist:n})}},a.onDragEnd=function(e){a.draggedItem=null,e.target.parentNode.classList.remove("border-dark"),e.target.parentNode.classList.remove("text-white"),e.target.parentNode.classList.remove("bg-secondary");var t,n=window.indexedDB.open(ue,ge),o=Object(g.a)(Object(g.a)(a));n.onsuccess=function(e){t=e.target.result,o.state.navlist.map(function(e,a){var n={label:e.label,project:e.project,url:e.url,order:a};return t.transaction([he],"readwrite").objectStore(he).put(n).onsuccess=function(e){},n})}},a.state={label:"",url:"",navlist:[],server:"http://localhost/tiniru-doc-server/generate.php",sdownload:"http://localhost/tiniru-doc-server/download.php",slugDeleteNav:"",modalVisible:!1,progressBar:!1,ProgressBarValue:1},a.handleInputChange=a.handleInputChange.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a.handleLoad=a.handleLoad.bind(Object(g.a)(Object(g.a)(a))),a.removeNav=a.removeNav.bind(Object(g.a)(Object(g.a)(a))),a.openModal=a.openModal.bind(Object(g.a)(Object(g.a)(a))),a.handleRemoveNav=a.handleRemoveNav.bind(Object(g.a)(Object(g.a)(a))),a.onDragOver=a.onDragOver.bind(Object(g.a)(Object(g.a)(a))),a.onDragStart=a.onDragStart.bind(Object(g.a)(Object(g.a)(a))),a.onDragEnd=a.onDragEnd.bind(Object(g.a)(Object(g.a)(a))),a.handleGenerate=a.handleGenerate.bind(Object(g.a)(Object(g.a)(a))),a.handleLoad(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"handleLoad",value:function(){var e=window.indexedDB.open(ue,ge),t=this;e.onsuccess=function(e){var a=e.target.result.transaction([he],"readonly").objectStore(he).getAll();a.onsuccess=function(e){var n=a.result,o=[];n.map(function(e){return o.push({label:e.label,url:e.url,order:e.order,project:e.project}),!0});var r=o.sort(function(e,t){return parseFloat(e.order)-parseFloat(t.order)});t.setState({navlist:r})},a.onerror=function(e){console.log("[onerror]",a.error)}}}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(w.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;W(he,"label",function(e){var a={label:t.state.label,project:localStorage.getItem("myProject"),url:t.state.url};a.order=null!==e?e.order+1:0,window.indexedDB.open(ue,ge).onsuccess=function(e){e.target.result.transaction([he],"readwrite").objectStore(he).put(a).onsuccess=function(e){t.setState({label:"",url:""}),t.handleLoad()}}})}},{key:"openModal",value:function(){console.log("Open modal called ",this.state.modalVisible);var e=!this.state.modalVisible;this.setState({modalVisible:e})}},{key:"removeNav",value:function(e){this.setState({slugDeleteNav:e}),this.openModal()}},{key:"handleRemoveNav",value:function(){var e=window.indexedDB.open(ue,ge),t=this;e.onsuccess=function(e){e.target.result.transaction([he],"readwrite").objectStore(he).delete(t.state.slugDeleteNav).onsuccess=function(e){t.openModal(),t.handleLoad()}}}},{key:"handleGenerate",value:function(e){var t=this,a=localStorage.getItem("myProject");t.setState({progressBar:!0}),function(e,t,a){var n;window.indexedDB.open(F,H).onsuccess=function(o){var r=(n=o.target.result).transaction([e],"readonly"),l=r.objectStore(e).get(t);l.onsuccess=function(e){var t=l.result;a&&a(t)},r.oncomplete=function(e){n.close()}}}(pe,a,function(n){Y(t.state.server,{project:a,datatype:"project",app:n}).then(function(n){"next"===n.result&&(t.setState({ProgressBarValue:5}),G(be,function(n){Y(t.state.server,{project:a,datatype:"topics",topics:n}).then(function(n){t.setState({ProgressBarValue:10}),G(fe,function(n){Y(t.state.server,{project:a,datatype:"changelog",changelog:n}).then(function(n){t.setState({ProgressBarValue:15}),G(he,function(n){Y(t.state.server,{project:a,datatype:"navigation",navigation:n}).then(function(n){t.setState({ProgressBarValue:20}),G(ve,function(n){var o=Math.round(80/parseInt(n.length)),r=20;n.map(function(l,s){return Y(t.state.server,{project:a,datatype:"pages",pages:l}).then(function(l){r+=o,t.setState({ProgressBarValue:r}),s===n.length-1&&(t.setState({ProgressBarValue:100}),Y(t.state.server,{generate:e,project:a,datatype:"generate"}).then(function(a){t.setState({progressBar:!1}),t.setState({ProgressBarValue:1}),window.location=t.state.sdownload+"?doc="+a.download+"&type="+e}))}),!0})})})})})})})}))})})}},{key:"render",value:function(){var e=this;console.log(this.state.modalVisible);var t=this.state.navlist.map(function(t,a){return o.a.createElement(Ee,{key:t.label,label:t.label,url:t.url,remove:e.removeNav.bind(e,t.label),dragstart:function(t){return e.onDragStart(t,a)},dragover:function(t){return e.onDragOver(a)},dragend:function(t){return e.onDragEnd(t)}})});return o.a.createElement("main",{className:"container  mt-5 pt-5 mb-5"},o.a.createElement(te.a,{when:this.state.modalVisible,message:" Are you sure to remove this navigation??"}),o.a.createElement("h1",{className:"mb-3"},"Generate Doc."),o.a.createElement(p.a,{to:"/manage",className:"btn  btn-sm radius-0 btn-light border"},"\xab Back to Manage"),o.a.createElement("div",{className:"row mt-4"},o.a.createElement("div",{className:"col-md-5"},o.a.createElement("div",{className:"card rounded-0 mb-5"},o.a.createElement("div",{className:"card-header bg-dark text-white"},o.a.createElement("div",{className:"font-weight-bold"},"Register Nav.")),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",{className:"card-text"},"Navigation is only used in html files."),o.a.createElement("form",{className:"",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"input-group  mb-3"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text"},"Label")),o.a.createElement("input",{type:"text",name:"label",onChange:this.handleInputChange,value:this.state.label,className:"form-control"})),o.a.createElement("div",{className:"input-group  mb-3"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text"},"Url")),o.a.createElement("input",{type:"text",name:"url",onChange:this.handleInputChange,value:this.state.url,className:"form-control"})),o.a.createElement("div",{className:"text-right"},o.a.createElement("button",{type:"submit",name:"save",className:"btn btn-dark  "},"Save Navigation")))))),o.a.createElement("div",{className:"col-md-7"},o.a.createElement("div",{className:"card mb-5 border-primary"},o.a.createElement("div",{className:"card-header bg-primary text-white"},o.a.createElement("div",{className:"font-weight-bold"},"Generate Document")),o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:" mb-4"},o.a.createElement("label",{className:"col-form-label"},"Url server for generate:"),o.a.createElement("input",{type:"text",name:"server",onChange:this.handleInputChange,value:this.state.server,className:"form-control form-control-sm"})),o.a.createElement("div",{className:" mb-4"},o.a.createElement("label",{className:"col-form-label"},"Url server for download:"),o.a.createElement("input",{type:"text",name:"sdownload",onChange:this.handleInputChange,value:this.state.sdownload,className:"form-control form-control-sm"})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("button",{type:"button",onClick:this.handleGenerate.bind(this,"pdf"),className:"btn btn-danger btn-block btn-lg"},"PDF File")),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("button",{type:"button",onClick:this.handleGenerate.bind(this,"html"),className:"btn btn-dark btn-block btn-lg"},"HTML File")))))),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"card rounded-0 mb-4"},o.a.createElement("div",{className:"card-header"},o.a.createElement("div",{className:"font-weight-bold"},"Navigation List")),o.a.createElement("div",{className:"card-body"},t)))),o.a.createElement(L,{visible:this.state.modalVisible,modal:function(t){return e.openModal()},remove:function(t){return e.handleRemoveNav()},message:"When deleting a topic, the pages inside will also be deleted. Are you sure to remove this topic?"}),o.a.createElement("div",{className:(this.state.progressBar?"show":"false")+" modal in",id:"progressModal",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true",style:this.state.progressBar?{display:"block"}:{display:"none"}},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content border border-dark"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h6",{className:"modal-title",id:"confirmModalLabel"},"Please Wait, Generate is running... ")),o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{className:"progress"},o.a.createElement("div",{ref:"progressbar",className:"progress-bar",role:"progressbar",style:{width:this.state.ProgressBarValue+"%"},"aria-valuenow":this.state.ProgressBarValue,"aria-valuemin":"0","aria-valuemax":"100"})))))))}}]),t}(n.Component);function Ne(){return null!==localStorage.getItem("myProject")}var we=Object(E.a)(function(e){var t=e.location;return o.a.createElement("main",null,o.a.createElement(y.TransitionGroup,null,o.a.createElement(y.CSSTransition,{key:t.key,timeout:{enter:1e3,exit:1e3},classNames:"fade"},o.a.createElement("section",{className:"route-section"},o.a.createElement(b.a,{location:t},o.a.createElement(v.a,{path:"/project",component:x}),o.a.createElement(v.a,{path:"/manage",render:function(e){return Ne()?o.a.createElement(V,e):e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/home"}):null}}),o.a.createElement(v.a,{path:"/topic",render:function(e){return Ne()?o.a.createElement(ee,e):e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/home"}):null}}),o.a.createElement(v.a,{path:"/write/:slug",render:function(e){return Ne()?o.a.createElement(le,e):e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/home"}):null}}),o.a.createElement(v.a,{path:"/edit/:slug",render:function(e){return Ne()?o.a.createElement(le,e):e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/home"}):null}}),o.a.createElement(v.a,{path:"/changelog/:slug?",render:function(e){return Ne()?o.a.createElement(me,e):e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/home"}):null}}),o.a.createElement(v.a,{path:"/generate/:slug?",render:function(e){return Ne()?o.a.createElement(ye,e):e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/home"}):null}}),o.a.createElement(v.a,{exact:!0,strict:!0,path:"*",render:function(e){return Ne()&&e.location.pathname===window.location.pathname?o.a.createElement(f.a,{to:"/manage"}):o.a.createElement(N,e)}}))))))}),je=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("footer",{className:"sticky-bottom"},o.a.createElement("div",{className:"container text-center"},o.a.createElement("p",null,o.a.createElement("a",{href:"https://tiniru.com"},"tiniru.com")," ",o.a.createElement("span",null,"webmaster@tiniru.com")))))}}]),t}(n.Component),Se=j,Oe=S,ke=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleLoad=a.handleLoad.bind(Object(g.a)(Object(g.a)(a))),a.handleLoad(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleLoad",value:function(){window.indexedDB?console.log("IndexedDB is supported "):console.log("Your browser doesn't support a stable version of IndexedDB.");var e,t=window.indexedDB.open(Se,Oe);t.onupgradeneeded=function(t){var a=(e=t.target.result).createObjectStore("project",{keyPath:"slug"}),n=e.createObjectStore("topics",{keyPath:"slug"}),o=e.createObjectStore("pages",{keyPath:"slug"}),r=e.createObjectStore("changelog",{keyPath:"slug"}),l=e.createObjectStore("navigation",{keyPath:"label"});a.createIndex("slug","slug",{unique:!0}),n.createIndex("slug","slug",{unique:!0}),o.createIndex("slug","slug",{unique:!0}),o.createIndex("topic","topic"),r.createIndex("slug","slug",{unique:!0}),l.createIndex("label","label")},t.onsuccess=function(t){e=t.target.result},t.onerror=function(e){console.log("[onerror]",t.error)}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(h,null),o.a.createElement(we,null),o.a.createElement(je,null))}}]),t}(n.Component);l.a.render(o.a.createElement(s.a,null,o.a.createElement(ke,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.d6ecf302.chunk.js.map